
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports!=="undefined"){module.exports=a(require("jquery"))}else{a(jQuery)}}}(function(b){var a=window.ProductGallery||{};a=(function(){var c=0;function d(g,i){var f=this,e,h;f.defaults={};f.initials={};f.$gallery=b(g),f.$thumbnails,f.$thumbnailImgs,f.$mainImageContainer,f.$mainImage,f.$loader,f.current_main_image,f.$overlay,f.$fotorama,f.fotorama;b.extend(f,f.initials);e=b(g).data("slick")||{};f.options=b.extend({},f.defaults,e,i);f.instanceUid=c++;f.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/;f.init()}return d}());a.prototype.init=function(){var c=this;if(!b(c.$gallery).hasClass("product-gallery")){b(c.$gallery).addClass("product-gallery")}if(!b(c.$gallery).hasClass("initialized")){b(c.$gallery).addClass("initialized");c.initStructure();c.initSlick();c.initThumbEvents();c.initDimensions()}};a.prototype.initStructure=function(){var c=this;if(c.$gallery.find(".thumbnails").length===0){c.$gallery.wrapInner('<div class="thumbnails"></div>')}if(c.$gallery.find(".main-image").length===0){var d='<table class = "main-image"><tr><td><a href = "" itemprop = "image" title = "" ><div class = "img" style = "background-image:url(\'\')"></div></a><img class = "loader" src = "loading.gif" style = "display:none"></td></tr></table>';c.$gallery.prepend(b(d))}c.$thumbnails=c.$gallery.children(".thumbnails"),c.$thumbnailImgs=c.$thumbnails.children(),c.$mainImageContainer=c.$gallery.children(".main-image"),c.$mainImage=c.$mainImageContainer.find(".img"),c.$loader=c.$mainImageContainer.find(".loader"),c.current_main_image=c.$mainImage.attr("src")};a.prototype.initDimensions=function(){var c=this;c.$mainImageContainer.find("td").height(c.$mainImageContainer.width())};a.prototype.initSlick=function(){var c=this;c.$thumbnails.on("init",function(e,d,f){c.initDimensions()});c.$thumbnails.slick({vertical:true,verticalSwiping:true,slidesToShow:4,slidesToScroll:3,infinite:false,adaptiveHeight:true,prevArrow:'<button type="button" class="slick-prev"><i class="fa fa-chevron-up"></i></button>',nextArrow:'<button type="button" class="slick-next"><i class="fa fa-chevron-down"></i></button>'})};a.prototype.initThumbEvents=function(){var c=this;c.$thumbnailImgs.mouseenter(function(d){c.change_img(c.getImageUrl(this,"preview"))});c.$thumbnails.mouseleave(function(d){c.change_img(c.current_main_image)});c.$thumbnailImgs.click(function(d){d.preventDefault();c.current_main_image=c.getImageUrl(this,"preview");c.change_img(c.getImageUrl(this,"preview"),c.getImageUrl(this,"original"));c.$thumbnails.find(".active").removeClass("active");b(this).addClass("active")});c.$mainImage.load(function(){c.$loader.dequeue().hide(0)});c.$mainImage.click(function(d){d.preventDefault();window.open(b(this).parent("a").attr("href"),"popupWindow","width=600,height=600,scrollbars=yes")});c.$thumbnails.find(".slick-track").children().first().click()};a.prototype.getImageUrl=function(g,c){g=b(g);var d=g.attr("src")||g.children("img").attr("src"),e=g.children("img").data("large")||g.data("large"),f=g.attr("href")||g.data("preview")||e||d;switch(c){case"thumb":return d;break;case"preview":return f;break;case"original":return e;break;case"all":return{thumb:d,large:e,preview:f};break;default:return false}};a.prototype.initFotorama=function(){var c=this;if(b("body").find(" > .fotorama").length==0){c.$overlay=b('<div class="fotorama-overlay">&nbsp;</div>').css({position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:10001}).fadeTo(0,0).hide().appendTo("body");var d=b("<div id='fotorama'></div>");d.css({position:"absolute",left:-99999,top:-99999}).fadeTo(0,0).appendTo("body");b("#fotorama").fotorama({thumbwidth:100,thumbheight:100,allowfullscreen:true,nav:"thumbs",autoplay:false,arrows:"always",click:true,swipe:true});var e=d.data("fotorama")}c.$overlay=b("body").children(".fotorama-overlay");c.$fotorama=b("body").children(".fotorama");c.fotorama=c.$fotorama.data("fotorama")};a.prototype.getFotoramaData=function(){var d=this;var c=[];d.$thumbnailImgs.each(function(){var f=d.getImageUrl(this,"all");var e=b(this).attr("alt")||b(this).children("img").attr("alt");c.push({img:f.preview,thumb:f.thumb,full:f.large,caption:e})});return c};a.prototype.change_img=function(e,d){var c=this;if(c.$mainImage.css("background-image")!=e){c.$loader.delay(1000).show(0);c.$mainImage.delay(1000).hide(0);c.$mainImage.css("background-image","url('"+e+"')").waitForImages({waitForAll:true,finished:function(){c.$loader.dequeue().hide(0);c.$mainImage.dequeue().show(0);c.$mainImageContainer.find("a").attr("href",d)}})}};b.fn.productGallery=function(){var f=this,h=arguments[0],e=Array.prototype.slice.call(arguments,1),c=f.length,g=0,d;for(g;g<c;g++){if(typeof h=="object"||typeof h=="undefined"){f[g].productGallery=new a(f[g],h)}else{d=f[g].productGallery[h].apply(f[g].productGallery,e)}if(typeof d!="undefined"){return d}}return f}}));